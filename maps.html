<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
	<link rel="stylesheet" type="text/css" href="css/main.css" />
	<link rel="stylesheet" type="text/css" href="css/maps.css" />
	<script type="text/javascript" src="js/mobile-check.js"></script>
	<script type="text/javascript" src="js/device-check.js"></script>
	<script type="text/javascript" src="js/dragscroll.js"></script>
	<title>maps</title>
</head>

<body class="fade-long fade-hidden">
	<div id="splash" class="fade-short fade-hidden">
		<img src="img/icons/map.png" alt="Maps">
	</div>
	<div id="maps-home"></div>
	<div id="zoom"><img src="img/maps/zoomout.png" /></div>
	<div id="container">
		<div id="map">
			<div class="rect"><img src="img/maps/lg/b0.jpg"></div><div class="rect"><img src="img/maps/lg/c0.jpg"></div><div class="rect"><img src="img/maps/lg/d0.jpg"></div><div class="rect"><img src="img/maps/lg/e0.jpg"></div><div class="rect"><img src="img/maps/lg/f0.jpg"></div><div class="rect"><img src="img/maps/lg/g0.jpg"></div><div class="rect"><img src="img/maps/lg/h0.jpg"></div><div class="rect"><img src="img/maps/lg/i0.jpg"></div><div class="rect"><img src="img/maps/lg/b1.jpg"></div><div class="rect"><img src="img/maps/lg/c1.jpg"></div><div class="rect"><img src="img/maps/lg/d1.jpg"></div><div class="rect"><img src="img/maps/lg/e1.jpg"></div><div class="rect"><img src="img/maps/lg/f1.jpg"></div><div class="rect"><img src="img/maps/lg/g1.jpg"></div><div class="rect"><img src="img/maps/lg/h1.jpg"></div><div class="rect"><img src="img/maps/lg/i1.jpg"></div><div class="rect"><img src="img/maps/lg/b2.jpg"></div><div class="rect"><img src="img/maps/lg/c2.jpg"></div><div class="rect"><img src="img/maps/lg/d2.jpg"></div><div class="rect"><img src="img/maps/lg/e2.jpg"></div><div class="rect"><img src="img/maps/lg/f2.jpg"></div><div class="rect"><img src="img/maps/lg/g2.jpg"></div><div class="rect"><img src="img/maps/lg/h2.jpg"></div><div class="rect"><img src="img/maps/lg/i2.jpg"></div><div class="rect"><img src="img/maps/lg/b3.jpg"></div><div class="rect"><img src="img/maps/lg/c3.jpg"></div><div class="rect"><img src="img/maps/lg/d3.jpg"></div><div class="rect"><img src="img/maps/lg/e3.jpg"></div><div class="rect"><img src="img/maps/lg/f3.jpg"></div><div class="rect"><img src="img/maps/lg/g3.jpg"></div><div class="rect"><img src="img/maps/lg/h3.jpg"></div><div class="rect"><img src="img/maps/lg/i3.jpg"></div><div class="rect"><img src="img/maps/lg/b4.jpg"></div><div class="rect"><img src="img/maps/lg/c4.jpg"></div><div class="rect"><img src="img/maps/lg/d4.jpg"></div><div class="rect"><img src="img/maps/lg/e4.jpg"></div><div class="rect"><img src="img/maps/lg/f4.jpg"></div><div class="rect"><img src="img/maps/lg/g4.jpg"></div><div class="rect"><img src="img/maps/lg/h4.jpg"></div><div class="rect"><img src="img/maps/lg/i4.jpg"></div><div class="rect"><img src="img/maps/lg/b5.jpg"></div><div class="rect"><img src="img/maps/lg/c5.jpg"></div><div class="rect"><img src="img/maps/lg/d5.jpg"></div><div class="rect"><img src="img/maps/lg/e5.jpg"></div><div class="rect"><img src="img/maps/lg/f5.jpg"></div><div class="rect"><img src="img/maps/lg/g5.jpg"></div><div class="rect"><img src="img/maps/lg/h5.jpg"></div><div class="rect"><img src="img/maps/lg/i5.jpg"></div><div class="rect"><img src="img/maps/lg/b6.jpg"></div><div class="rect"><img src="img/maps/lg/c6.jpg"></div><div class="rect"><img src="img/maps/lg/d6.jpg"></div><div class="rect"><img src="img/maps/lg/e6.jpg"></div><div class="rect"><img src="img/maps/lg/f6.jpg"></div><div class="rect"><img src="img/maps/lg/g6.jpg"></div><div class="rect"><img src="img/maps/lg/h6.jpg"></div><div class="rect"><img src="img/maps/lg/i6.jpg"></div><div class="rect"><img src="img/maps/lg/b7.jpg"></div><div class="rect"><img src="img/maps/lg/c7.jpg"></div><div class="rect"><img src="img/maps/lg/d7.jpg"></div><div class="rect"><img src="img/maps/lg/e7.jpg"></div><div class="rect"><img src="img/maps/lg/f7.jpg"></div><div class="rect"><img src="img/maps/lg/g7.jpg"></div><div class="rect"><img src="img/maps/lg/h7.jpg"></div><div class="rect"><img src="img/maps/lg/i7.jpg"></div><div class="rect"><img src="img/maps/lg/b8.jpg"></div><div class="rect"><img src="img/maps/lg/c8.jpg"></div><div class="rect"><img src="img/maps/lg/d8.jpg"></div><div class="rect"><img src="img/maps/lg/e8.jpg"></div><div class="rect"><img src="img/maps/lg/f8.jpg"></div><div class="rect"><img src="img/maps/lg/g8.jpg"></div><div class="rect"><img src="img/maps/lg/h8.jpg"></div><div class="rect"><img src="img/maps/lg/i8.jpg"></div>
		</div>
	</div>
	<script type="text/javascript">
		var locations = [
			{ x: 6603, y: 300 },
			{ x: 4629, y: 153 },
			{ x: 5083, y: 2530 },
			{ x: 2200, y: 1224 },
			{ x: 6600, y: 4200 },
			{ x: 7200, y: 4200 },
			{ x: 0, y: 0 }              
		];
		function init() {
			document.body.classList.add('fade-in');
			const homeBtn = document.getElementById('maps-home');
			function goHome() {
				location.href = '/home.html';
			}
			homeBtn.addEventListener('click', goHome);
			homeBtn.addEventListener('tap', goHome);
			const isMobile = (localStorage.getItem('isMobile') === 'true');
			const cont = document.getElementById('container');

			function scrollSafe(x, y) {
				if (isMobile)
					window.scrollTo(x, y);
				else
					cont.scrollTo(x, y);
			}

			const splash = document.getElementById('splash');
			if (!localStorage['mapzoom']) {
				splash.classList.add('fade-in');
				setTimeout(() => {
					console.log('wtf')
					splash.classList.remove('fade-in');
					splash.style.display = 'none';
				}, 1500);
			} else {
				splash.style.display = 'none';
			}

			if (localStorage["mapzoom"] === "true") {
				const pos = [+localStorage.getItem('ex'), +localStorage.getItem('why')];
				scrollSafe(pos[0] * 4, pos[1] * 4);
			} else {
				localStorage["appCount"]++;
				const level = parseInt(localStorage.getItem('gamestate'));
				scrollSafe(locations[level].x, locations[level].y)
			}

			function zoom() {
				localStorage.setItem("ex",  cont.scrollLeft || window.scrollX);
				localStorage.setItem("why", cont.scrollTop || window.scrollY);
				location.href = "maps-zoomout.html";
			}
			const zoomBtn = document.getElementById('zoom');
			zoomBtn.addEventListener('click', zoom);
			zoomBtn.addEventListener('tap', zoom);
		}
		window.addEventListener('load', init);
    
      /* used to generate HTML, has to be on page for unveil to work
      var letters = ['b', 'c', 'd','e','f', 'g', 'h', 'i']; // letters correspond to index nums for columns of map
      var columns = 8; 
      var rows = 9;
      var element = document.getElementById('map');
      $(map).width(columns*1024).height(rows*700);
      
      
      // go through columns in each row and populate map art assets
       for (var i = 0; i < rows; i++) {
         for (var j = 0; j < columns; j++){  
           // HTML for each map rect
           var rect = document.createElement('div');
           rect.className = 'rect';          
           try {  
             // add images
             var image = new Image();
             //image.src = "img/maps/"+tmp[j]+i+".jpg";
             //image.src = "img/maps/loader.gif";
             image.className = "lazy";
             image.src = "img/maps/load.jpg";
             image.setAttribute('data-src', "img/maps/"+letters[j]+i+".jpg");
             image.addEventListener("load", function() {
                                        //console.log("" + tmp[j]+i + "loaded");
                                      }, false);
             rect.appendChild(image);   
           } 
           catch (e) {
             console.log(e)
             return;
           }   
           $(map).append(rect);
         } 
       } 
      
      */
	</script>
</body>
</html>
